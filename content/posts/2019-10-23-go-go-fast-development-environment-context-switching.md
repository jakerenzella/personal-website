---
template: post
title: 'Go-Go: Fast Development Environment Context Switching'
slug: go-go
draft: false
date: 2019-10-23T04:33:26.388Z
description: >-
  Switching projects is a point of friction. Booting up multiple backends and
  frontends, trying to remember the correct sequence of `npm` commands to get
  something serving, launching the correct port on localhost, booting up
  databases etc.


  Go-Go is a simple set of scripts which can define tmux workspaces for
  individual projects, as well as define a set of commands to be executed in
  each terminal.
category: 'Productivity, Software'
tags:
  - Productivity
  - Software
---
My day to day usually consists of working on my PhD project, working part time as a Software Engineer, or contributing to open-source projects. Ideally (and on paper) I have set days for each, however I often find myself switching between development projects multiple times a day.

I always found the overhead of switching projects to be a point of friction. Booting up multiple backends and frontends, trying to remember the correct sequence of `npm` commands to get something serving, launching the correct port on localhost, booting up databases etc.

The cognitive overload of switching projects is tough. The amount of work required to even start getting work done was often overwhelming, and I found myself becoming distracted or convincing myself I didn't have enough time to get anything done anyway. I know speaking to colleagues this is a shared experience.

What I want to do, is go from an empty terminal, to something like this:

![](/media/go-go/go-go.png)

With as few steps as possible.

## Enter [Go-Go](https://github.com/jakerenzella/go-go)

Go-Go is a simple collection of handy scripts and wrappers I developed, using tmuxp as a base, which can define multiple workspaces and easily switch between them.

Here it is in action:

![](/media/go-go/go-go.gif)

Not visible is the launching of Postgres, and other services required for this specific project.

## How does it work?

The definition for the above workspace is defined in a json file, and contains something like this:

```
 "windows": [
    {
      "options": {
        "automatic-rename": "off"
      },
      "window_name": "zsh",
      "layout": "0d64,193x44,0,0{96x44,0,0[96x22,0,0,1,96x21,0,23,2],96x44,97,0[96x22,97,0,3,96x21,97,23,4]}",
      "panes": [
        {
          "shell_command": [
            " kill -9 $(lsof -i tcp:3000 -t)",
            "cd $PROJECT_PATH/doubtfire-api",
            "bundle exec rails s"
          ]
        },
        {
          "shell_command": [
            "cd $PROJECT_PATH/doubtfire-api"
          ],
          "focus": "true"
        },
        {
          "shell_command": [
            "lsof -i tcp:4200 | awk 'NR!=1 {print $2}' | xargs kill",
            "cd $PROJECT_PATH/doubtfire-web",
            "npm start"
          ]
        },
        {
          "shell_command": [
            "cd $PROJECT_PATH/doubtfire-web"
          ]
        }
      ],
      "focus": "true"
    }
  ]
```

The four `shell_commands` define each window's launch commands, so above will create 2 frontend and backend shells, and launch the frontend and backend respectfully. The layout was generated by manually creating the tmux layout and saving the parameters.

To put everything in place, an alias or global command needs to be correctly configured so we can launch the environment from the command line.


```
#!/bin/bash

PROJECT_PATH=$1

mkdir -p ~/.dotfiles

cat <<EOF > ~/.dotfiles/ggdoubtfire
$VISUAL $PROJECT_PATH/doubtfire-web
$VISUAL $PROJECT_PATH/doubtfire-api
open -a Postgres
# toggl doubtfire-dev
open https://github.com/doubtfire-lms/
open http://localhost:4200
tmuxp load doubtfire
EOF
```

In the GitHub repository, is a setup script which can accept a definition file like above to setup the alias. This is also where you can define any application launches to occur, like opening Visual Studio Code, Postgres etc. The `tmuxp` line above is where our tmux workspace gets called.

To set this all up I mentioned a [setup](https://github.com/jakerenzella/go-go/blob/master/setup.sh). The setup will ensure tmuxp is installed on the machine, ask you for project directories, and ensure everything is correctly placed on the path.

This is just a personal project, so if you're keen to use the above flow I'd like to take pull requests, or see what changes or improvements could be made.

